# Nginx介绍
Nginx是一个轻量级的服务器，常用来作为代理来使用，而在用作代理的过程中 主要分为两种方式： **正向代理** 和 **反向代理** 。 这也是面试当中 经常被问到的问题。 先通俗易懂的解释一下就是， 
**正向代理**代理的是客户端， **反向代理**代理的是服务端
## 正向代理
正向代理 代理的是客户端，是在客户端这一段进行代理，隐藏了 客户端信息。最典型的例子就是 翻墙软件。   用户想要访问国外网站，先向代理服务器发送请求，代理服务器收到请求后，在向国外的网站发送请求，从而获得相应的数据，再返回给客户端。 在这个过程中，代理服务器就是一个正向代理。  它将客户端隐藏起来，服务器不知道到底是哪一个客户端发送的请求，而只知道这个请求是由代理服务器发送的，这就是正向代理，隐藏客户端。 客户端必须要进行一些特别的设置才能使用正向代理
![img](https://raw.githubusercontent.com/CsongL/javaScript-learning/main/images/ForwardProxy.png)

### 应用场景
* 翻墙软件
* 做缓存，将访问服务器的资源缓存在代理服务器上，提高访问速度
* 对客户端的访问进行限制和授权，例如可以限制客户端访问某些敏感网站，以及记录用户的网站访问记录

## 反向代理
反向代理代理的是服务器，是在服务器这一端进行的代理，隐藏了服务器的信息。典型的例子，人们使用百度引擎。
每天会有上百万请求，如果只有一个引擎去处理这些请求，那效率是及其低下的。通过一个反向代理器，将上百万的请求转发给不同的引擎，从而得到提高请求效率的效果。例如 淘宝网 也是。每天都会有很多人浏览，因此 需要通过代理服务器将请求发送给不同的服务器，通过不同的服务器去处理用户的请求。这就是反向代理。
![img](https://raw.githubusercontent.com/CsongL/javaScript-learning/main/images/ReverseProxy.png)

### 应用场景
* **负载均衡**  反向代理中最重要的一个应用场景。
* 确保内网安全，代理服务器是对外暴露的一个接口和网址，内部的服务器被隐藏起来，外部的请求只能访问到代理服务器，无法直接访问到内部服务器（淘宝网 只对外暴露 www.taobao.com)

### 负载均衡
负载均衡的目的 就是为了 提高处理请求的效率，将不同的请求分配给不同的服务器进行处理，从而提高服务器的效率。那么是如何判断哪一个请求分配给哪一个服务器呢？
首先 Nginx有一个 消息队列，存储接收到的请求，然后通过不同的算法决定将请求分配给哪一个服务器
Nginx 支持的算法有：    
* weight轮询(默认): 给不同的服务器配置不同的权重，权重大的服务器被分配到请求的几率越大，权重根据服务器的硬件情况进行调整
* ip_hash: 根据请求的ip地址计算hash值，根据hash值进行匹配。这种方法 同一个客户端 发送的请求总会被分配到固定的服务器
* url_hash: 按照访问的url计算hash值，根据hash值分配服务器，同一个url被分配到固定的服务器。Nginx作为静态服务器的情况下可以提高缓存效率
* fair: 智能调整调度算法。根绝服务器处理请求的时间动态的进行均衡分配。效率高的服务器，被分配的概率高。 **注意 Nginx 原生不支持，需要安装*upstream_fair*模块**
