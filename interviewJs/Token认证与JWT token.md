## Token登录认证
目前有两种登录认证方式：一种是基于服务器的保存session状态的认证方式，一种是基于Token认证的方式，JWT(JSON Token Web)就是一种Token认证方式
### 基于服务器的保存session状态的认证方式
大概流程：
  1. 客户端发送用户名和密码，
  2. 服务器接收到用户发送的用户名和密码后进行验证，验证通过话，会在当前的session里面保存相关的数据，例如用户角色，权限等
  3. 服务器会将当前session_id放入cookie中返回给用户，
  4. 用户下次发送请求时，会携带相应的session_id, 根据这个session_id可以找到前期存储在服务端的session数据，从而判断用户的状态

存在的问题：
1. 存储问题。 如果有很多用户访问该网站，并且通过了该网站的验证，那么服务端会存储很多session会话信息，而通常会将session信息存储在内存中，因此可能会导致服务端内存空间不够
2. 扩展性差。因为需要在服务器端保存当前session的状态，因此在实现负载均衡时，如何转在不同的服务器之间共享不同服务器上存储的session会是一个问题，例如 可能在刚开始我们是与服务器A进行通信，session状态存储在服务器A上，某一时刻当我们再次发送请求时，可能该请求会被分派给服务器B，那么服务器B上并没有我们的session状态，那么我们需要重新登录一遍吗，这样很会麻烦，因此说基于服务端的保存session状态的认证方式扩展性较差

### 基于Token的认证方式
Token通常就是在服务器端生成的一个加密后的字符串，然后将这个生成的加密字符串发送给客户端，之后的每次请求都携带该Token,从而实现一些验证. Token验证方式与服务器端保存session状态认证方式的一个最大的区别在于 不用在服务器端保存Token，服务器端只需要进行验证就行
其中比较著名的Token就是JWT(JSON Web Token)

#### JSON Web Token
JSON Web Token 主要有三部分组成，每一部分之间通过(.)连接，就像 Head.PayLoad.Signature这样的格式
这三部分分别是：
Header: Header本质上是一个JSON对象，描述了JWT的元数据
```JSON
{
    "alg": "HS256", // 描述了JWT的加密算法
    "typ": "JWT" // 描述了JWT的类型
}
```
服务会将通过Base64Url编码将Header转为字符串，从而变为JWT Token的第一部分

Payload: 负载 PayLoad也是一个JSON对象，用来存放实际需要传递的数据，JWT规定了7个官方的字段
```JSON
{
    "iss": "签发人",
    "exp": "过期时间",
    "sub": "主题",
    "aud": "接收方",
    "nbf": "生效时间",
    "iat": "签发时间",
    "jti": "唯一身份标识"
}
```
也可以自定一些字段
payload与header一样 通过Base64Url编码将payload json对象变为字符串，从而变为JWT Token的第二部分

Signature: Signature就是服务端通过在hedaer中声明的加密算法以及服务端存储的秘钥 对 heder和payload这两部分进行签名，从而变为JWT Token的第三部分

##### JWT认证流程
1. 用户发送用户名和密码，
2. 服务器接收到对应的用户名和密码后，进行验证，验证通过后，分别构建heder和payload部分，然后通过加密算法和存储的秘钥对齐就行数字签名，从而组成JWT， 将该JWT发送给对应的客户端
3. 客户端再次发送请求时，会携带该Token,
4. 服务器接收到Token后，会对签名部分进行解密，将解密后的数据与客户端发送过来的token进行对比从而判断Token是否被修改

JWT需要关注的问题：
1. 如果payload没有加密， 不要将敏感的信息放入payload中，因为这就相当于是明文传输
2. 秘钥只能服务端知道，因为只需要在服务端进行签名和验证，客户端只需要保存对应的Token就行
3. JWT可以放在cookie中返回给客户端，只不过这样会存在跨域问题，如果直接放在头部，不会存在跨域问题
4. JWT 如果放在头部返回给客户端，那么也就可以解决跨域问题


### 比较
1. Token验证方式不需要在服务端进行存储，相较于基于服务端session验证，Token验证方式节省了很多内存空间
2. Token验证方式具有较好的可扩展性，以为不需要存储session信息，只需要在服务端进行解密验证，所以扩展性比较强
